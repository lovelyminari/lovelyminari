[외부 api 호출할 때]
1. 트랜잭션 잘 다뤄야 한다
데이터베이스 커넥션과 같은 트랜잭션에서 외부 api를 호출하면, 외부 api가 타임아웃이 될 때까지 기다린다면, 데이터베이스 커넥션 pool을 잡고 있기에, db connection pool 고갈이 발생할 수 있다.
-> 대용량, 대규모 시스템에서 기본적으로 고려해야하는 사항임
따라서 DB 커넥션과 외부 API 호출은 트랜잭션을 분리해야하는데, 이를 위한 다양한 패턴이 있다.
Connection Timeout : 설정한 시간까지 서버에 연결(ACK가 오는 시간)
Read Timeout : 응답 데이터가 오는데에 시간이 오래 걸리는 경우

2. 재시도하라
4XX는 요청이 잘못된 경우나 authorization 이슈이므로 재시도할 의미가 없을 것 같고...
5XX는 상대 서버가 잠깐 문제가 있었을 수도 있으므로 재시도 대상으로 봐도 좋다


